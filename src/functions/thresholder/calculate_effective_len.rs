////////////////////////////////////////////////////////////////////////////////////////////////////

// crate utilities
use crate::{
  BIN_OVERLAP,
  BIN_SIZE,
};

////////////////////////////////////////////////////////////////////////////////////////////////////

// private function
use super::calculate_effective_len;

////////////////////////////////////////////////////////////////////////////////////////////////////

// private function
macro_rules! test_calculate_effective_len {
  ( $function: ident;
    $glen: expr, $expect: expr
  ) => {
    #[test]
    fn $function() {
      let effective_length = calculate_effective_len(
        $glen,
        BIN_SIZE as f64,
        BIN_OVERLAP as f64,
      );
      assert_eq!(
        effective_length, $expect,
        "\n\nScaffold length: {:?}.\nEffective scaffold length: {:?}.\nExpected: {:?}.\n\n",
        $glen, effective_length, $expect,
      );
    }
  };
}

////////////////////////////////////////////////////////////////////////////////////////////////////

// test
test_calculate_effective_len!(test01; 2000., 4000.);
test_calculate_effective_len!(test02; 3243556456., 6487112912.);

////////////////////////////////////////////////////////////////////////////////////////////////////
